{"version":3,"file":"profile-CXIPWEot.js","sources":["../../src/js/api/profile/read.js","../../src/js/api/profile/update.js","../../src/js/ui/profile/update.js","../../src/js/router/views/profile.js"],"sourcesContent":["import { API_SOCIAL_PROFILES } from \"../constants\";\r\nimport { headers } from \"../headers\";\r\n\r\n/**\r\n *\r\n * @param {string} username - name of the user\r\n * @returns {Promise} - user info\r\n * @example\r\n * ```js\r\n * readProfile(\"Finn\")\r\n * ```\r\n */\r\n\r\nexport async function readProfile(username) {\r\n  try {\r\n    const response = await fetch(API_SOCIAL_PROFILES + \"/\" + username, {\r\n      method: \"GET\",\r\n      headers: headers(),\r\n    });\r\n    if (response.ok) {\r\n      const profileData = await response.json();\r\n\r\n      return profileData.data;\r\n    }\r\n  } catch (error) {\r\n    alert(\"something went wrong trying to get your profile information\");\r\n  }\r\n}\r\n\r\nexport async function readProfiles(limit, page) {}\r\n","import { API_SOCIAL_PROFILES } from \"../constants\";\r\nimport { headers } from \"../headers\";\r\n\r\n/**\r\n *\r\n * @param {string} username\r\n * @param {object} profileInfo - object that contains info about the profile - {avatar, banner, bio}\r\n * @param {object} profileInfo.avatar - object that contains url, and alt of the avatar (profile picture)\r\n * @param {object} profileInfo.banner . object that contains url, and alt of the banner (cover picture)\r\n * @param {string} profileInfo.bio - text that contains the bio of the profile\r\n *\r\n * @example\r\n * ```js\r\n * userProfile(\"Finn\", {{url:\"string\",alt:\"string\"}, {url:\"string\", alt:\"string\"}, \"Bio Text\"})\r\n * ```\r\n */\r\n\r\nexport async function updateProfile(username, { avatar, banner, bio }) {\r\n  try {\r\n    const blob = { avatar: avatar, banner: banner, bio: bio };\r\n\r\n    const response = await fetch(API_SOCIAL_PROFILES + \"/\" + username, {\r\n      method: \"PUT\",\r\n      headers: headers(),\r\n      body: JSON.stringify({\r\n        avatar: avatar,\r\n        banner: banner,\r\n        bio: bio,\r\n      }),\r\n    });\r\n    if (response.ok) {\r\n      alert(\"You updated your profile!\");\r\n      const data = await response.json();\r\n      localStorage.setItem(\"userInfo\", json.stringify(data));\r\n      // window.location.reload\r\n    }\r\n  } catch (error) {\r\n    alert(\"something went wrong trying to update your profile\");\r\n  }\r\n}\r\n","import { updateProfile } from \"../../api/profile/update\";\r\n\r\n/**\r\n * Gets form data - then sends the information to the API function\r\n * @param {object} event\r\n * @example\r\n * ```js\r\n * form.addEventListener(\"submit\", onUpdateProfile)\r\n * ```\r\n */\r\nexport async function onUpdateProfile(event) {\r\n  event.preventDefault();\r\n\r\n  const userinfo = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n  const username = userinfo.name;\r\n\r\n  const formData = new FormData(event.target);\r\n\r\n  const avatar = {\r\n    url: formData.get(\"avatarUrl\"),\r\n    alt: \"Profile Image\",\r\n  };\r\n\r\n  const banner = {\r\n    url: formData.get(\"bannerUrl\"),\r\n    alt: formData.get(\"bannerAlt\"),\r\n  };\r\n\r\n  const updateData = {\r\n    avatar: avatar,\r\n    banner: banner,\r\n    bio: formData.get(\"bio\"),\r\n  };\r\n\r\n  updateProfile(username, updateData);\r\n}\r\n","import { readPostsByUser } from \"../../api/post/read\";\r\nimport { readProfile } from \"../../api/profile/read\";\r\nimport { makeHeader } from \"../../ui/global/header\";\r\nimport { makeAPost } from \"../../ui/post/makePost\";\r\nimport { onUpdateProfile } from \"../../ui/profile/update\";\r\nimport { authGuard } from \"../../utilities/authGuard\";\r\n\r\nconst form = document.forms.updateProfile;\r\n\r\nform.addEventListener(\"submit\", onUpdateProfile);\r\n\r\nauthGuard();\r\n\r\nconst header = document.querySelector(\"header\");\r\nmakeHeader(header);\r\n/**\r\n * Fetches the logged in user info and Creates the HTML for profile page\r\n *\r\n * @example\r\n * ```js\r\n * readProfileInfo()\r\n * ```\r\n */\r\nconst readProfileInfo = async () => {\r\n  const username = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n  const data = await readProfile(username.name);\r\n  const userPosts = await readPostsByUser(username.name);\r\n\r\n  const bannerDiv = document.getElementById(\"profileBanner\");\r\n  const profileImageDiv = document.getElementById(\"profileImage\");\r\n  const nameDiv = document.getElementById(\"username\");\r\n  const bioDiv = document.getElementById(\"bio\");\r\n\r\n  const banner = document.createElement(\"img\");\r\n  banner.src = data.banner.url;\r\n  banner.alt = data.banner.alt;\r\n  banner.className = \"object-cover w-full h-full\";\r\n\r\n  const profileImage = document.createElement(\"img\");\r\n  profileImage.src = data.avatar.url;\r\n  profileImage.alt = data.avatar.alt;\r\n  profileImage.className = \"rounded-md border-white border-4\";\r\n\r\n  const name = document.createElement(\"h2\");\r\n  name.innerText = data.name;\r\n  name.className = \"text-3xl text-white font-semibold\";\r\n\r\n  const bio = document.createElement(\"p\");\r\n  bio.innerText = data.bio;\r\n  bio.className = \"text-xl text-white font-semibold\";\r\n\r\n  bannerDiv.appendChild(banner);\r\n  profileImageDiv.appendChild(profileImage);\r\n  nameDiv.appendChild(name);\r\n  bioDiv.appendChild(bio);\r\n\r\n  userPosts.forEach((post) => {\r\n    makeAPost(post, \"userPosts\");\r\n  });\r\n};\r\n\r\nreadProfileInfo();\r\n"],"names":["readProfile","username","response","API_SOCIAL_PROFILES","headers","updateProfile","avatar","banner","bio","blob","data","onUpdateProfile","event","formData","updateData","form","authGuard","header","makeHeader","readProfileInfo","userPosts","readPostsByUser","bannerDiv","profileImageDiv","nameDiv","bioDiv","profileImage","name","post","makeAPost"],"mappings":"wNAaO,eAAeA,EAAYC,EAAU,CAC1C,GAAI,CACF,MAAMC,EAAW,MAAM,MAAMC,EAAsB,IAAMF,EAAU,CACjE,OAAQ,MACR,QAASG,EAAS,CACxB,CAAK,EACD,GAAIF,EAAS,GAGX,OAFoB,MAAMA,EAAS,QAEhB,IAEtB,MAAe,CACd,MAAM,6DAA6D,CACpE,CACH,CCVO,eAAeG,EAAcJ,EAAU,CAAE,OAAAK,EAAQ,OAAAC,EAAQ,IAAAC,CAAG,EAAI,CACrE,GAAI,CACF,MAAMC,EAAO,CAAE,OAAQH,EAAQ,OAAQC,EAAQ,IAAKC,GAE9CN,EAAW,MAAM,MAAMC,EAAsB,IAAMF,EAAU,CACjE,OAAQ,MACR,QAASG,EAAS,EAClB,KAAM,KAAK,UAAU,CACnB,OAAQE,EACR,OAAQC,EACR,IAAKC,CACb,CAAO,CACP,CAAK,EACD,GAAIN,EAAS,GAAI,CACf,MAAM,2BAA2B,EACjC,MAAMQ,EAAO,MAAMR,EAAS,OAC5B,aAAa,QAAQ,WAAY,KAAK,UAAUQ,CAAI,CAAC,CAEtD,CACF,MAAe,CACd,MAAM,oDAAoD,CAC3D,CACH,CC7BO,eAAeC,EAAgBC,EAAO,CAC3CA,EAAM,eAAc,EAGpB,MAAMX,EADW,KAAK,MAAM,aAAa,QAAQ,UAAU,CAAC,EAClC,KAEpBY,EAAW,IAAI,SAASD,EAAM,MAAM,EAEpCN,EAAS,CACb,IAAKO,EAAS,IAAI,WAAW,EAC7B,IAAK,eACT,EAEQN,EAAS,CACb,IAAKM,EAAS,IAAI,WAAW,EAC7B,IAAKA,EAAS,IAAI,WAAW,CACjC,EAEQC,EAAa,CACjB,OAAQR,EACR,OAAQC,EACR,IAAKM,EAAS,IAAI,KAAK,CAC3B,EAEER,EAAcJ,EAAUa,CAAU,CACpC,CC5BA,MAAMC,EAAO,SAAS,MAAM,cAE5BA,EAAK,iBAAiB,SAAUJ,CAAe,EAE/CK,IAEA,MAAMC,EAAS,SAAS,cAAc,QAAQ,EAC9CC,EAAWD,CAAM,EASjB,MAAME,EAAkB,SAAY,CAClC,MAAMlB,EAAW,KAAK,MAAM,aAAa,QAAQ,UAAU,CAAC,EACtDS,EAAO,MAAMV,EAAYC,EAAS,IAAI,EACtCmB,EAAY,MAAMC,EAAgBpB,EAAS,IAAI,EAE/CqB,EAAY,SAAS,eAAe,eAAe,EACnDC,EAAkB,SAAS,eAAe,cAAc,EACxDC,EAAU,SAAS,eAAe,UAAU,EAC5CC,EAAS,SAAS,eAAe,KAAK,EAEtClB,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,IAAMG,EAAK,OAAO,IACzBH,EAAO,IAAMG,EAAK,OAAO,IACzBH,EAAO,UAAY,6BAEnB,MAAMmB,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,IAAMhB,EAAK,OAAO,IAC/BgB,EAAa,IAAMhB,EAAK,OAAO,IAC/BgB,EAAa,UAAY,mCAEzB,MAAMC,EAAO,SAAS,cAAc,IAAI,EACxCA,EAAK,UAAYjB,EAAK,KACtBiB,EAAK,UAAY,oCAEjB,MAAMnB,EAAM,SAAS,cAAc,GAAG,EACtCA,EAAI,UAAYE,EAAK,IACrBF,EAAI,UAAY,mCAEhBc,EAAU,YAAYf,CAAM,EAC5BgB,EAAgB,YAAYG,CAAY,EACxCF,EAAQ,YAAYG,CAAI,EACxBF,EAAO,YAAYjB,CAAG,EAEtBY,EAAU,QAASQ,GAAS,CAC1BC,EAAUD,EAAM,WAAW,CAC/B,CAAG,CACH,EAEAT,EAAiB"}