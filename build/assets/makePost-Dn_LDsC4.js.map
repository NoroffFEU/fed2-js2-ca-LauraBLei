{"version":3,"file":"makePost-Dn_LDsC4.js","sources":["../../src/js/api/post/delete.js","../../src/js/ui/post/delete.js","../../src/js/ui/post/makePost.js"],"sourcesContent":["import { API_SOCIAL_POSTS } from \"../constants\";\r\nimport { headers } from \"../headers\";\r\n\r\n/**\r\n * This will send a DELETE fetch call to the API - deleting a post.\r\n * @param {string} id - id of the post that should be deleted\r\n * @example\r\n * ```js\r\n * deletePost(\"708\")\r\n * ```\r\n */\r\n\r\nexport async function deletePost(id) {\r\n  try {\r\n    const response = await fetch(API_SOCIAL_POSTS + \"/\" + id, {\r\n      method: \"DELETE\",\r\n      headers: headers(),\r\n    });\r\n    if (response.ok) {\r\n      alert(\"Post Deleted\");\r\n    }\r\n  } catch (error) {\r\n    alert(\"Something went wrong trying to delete post\");\r\n  }\r\n}\r\n","import { deletePost } from \"../../api/post/delete\";\r\n\r\n/**\r\n * Deletes selected posts\r\n * @param {object} event\r\n * @example\r\n * ```js\r\n * button.addEventListener(\"click\", onDeletePost)\r\n * ```\r\n */\r\nexport async function onDeletePost(event) {\r\n  const id = event.target.id;\r\n  console.log(\"id:\", id);\r\n\r\n  await deletePost(id);\r\n\r\n  location.reload();\r\n}\r\n","import { onDeletePost } from \"./delete\";\r\n/**\r\n * Makes the HTML for a post\r\n * @param {object} post - post object\r\n * @param {string} id - ID of the container you want the post / posts to be in.\r\n */\r\nexport const makeAPost = (post, id) => {\r\n  const outerContainer = document.getElementById(id);\r\n\r\n  outerContainer.className = \"flex flex-col items-center mt-20\";\r\n\r\n  const userinfo = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n  const username = userinfo.name;\r\n\r\n  const container = document.createElement(\"div\");\r\n  container.className =\r\n    \"flex flex-col gap-3 max-w-[750px] w-full rounded-md bg-lightGray mb-10 shadow-blue shadow-lg p-5 \";\r\n  const countDiv = document.createElement(\"div\");\r\n  countDiv.className = \"flex gap-10 justify-between items-center\";\r\n\r\n  const title = document.createElement(\"h2\");\r\n  title.innerText = post.title;\r\n  title.className = \"text-center text-blue text-2xl font-semibold\";\r\n\r\n  const text = document.createElement(\"p\");\r\n  text.innerText = post.body;\r\n  text.className = \"text-blue font-semibold\";\r\n  const imageDiv = document.createElement(\"div\");\r\n  imageDiv.className =\r\n    \"max-h-[200px] overflow-hidden w-auto flex items-center justify-center\";\r\n  if (post.media) {\r\n    const image = document.createElement(\"img\");\r\n    image.src = post.media.url;\r\n    image.alt = post.media.alt;\r\n    image.className = \"max-h-[200px]\";\r\n\r\n    imageDiv.appendChild(image);\r\n  } else {\r\n    const image = document.createElement(\"p\");\r\n    image.innerText = \"*Image Not Found*\";\r\n\r\n    imageDiv.appendChild(image);\r\n  }\r\n\r\n  const editSection = document.createElement(\"div\");\r\n  editSection.className = \"flex gap-10\";\r\n\r\n  const editButton = document.createElement(\"button\");\r\n  editButton.innerHTML = `<i class=\"fa-solid fa-pen fa-lg\" style=\"color: #000000;\"></i>`;\r\n  editButton.addEventListener(\"click\", () => {\r\n    localStorage.setItem(\"postID\", JSON.stringify(post.id));\r\n    localStorage.setItem(\"post\", JSON.stringify(post));\r\n    window.location.href = \"/post/edit/\";\r\n  });\r\n\r\n  const deleteButton = document.createElement(\"button\");\r\n  deleteButton.innerHTML = `<i id=\"${post.id}\" class=\"fa-solid fa-trash fa-lg\" style=\"color: #050505;\"></i>`;\r\n  deleteButton.id = post.id;\r\n  deleteButton.addEventListener(\"click\", onDeletePost);\r\n\r\n  const reactionSection = document.createElement(\"div\");\r\n  reactionSection.className = \"flex gap-10\";\r\n\r\n  const commentsDiv = document.createElement(\"div\");\r\n  commentsDiv.innerHTML = `\r\n        <p><i class=\"fa-solid fa-comment fa-xl\"  style=\"color: #146EAE\"></i> ${post._count.comments}</p>`;\r\n\r\n  const reactionDiv = document.createElement(\"div\");\r\n  reactionDiv.innerHTML = `\r\n        <p><i class=\"fa-solid fa-heart fa-xl\" style=\"color: #c50d0d;\"></i> ${post._count.reactions}</p>`;\r\n\r\n  const seePost = document.createElement(\"button\");\r\n  seePost.className =\r\n    \"buttonEffect text-blue text-l font-semibold text-center w-full\";\r\n  seePost.innerText = \"See Post\";\r\n\r\n  seePost.addEventListener(\"click\", () => {\r\n    window.location.href = \"/post/\";\r\n    localStorage.setItem(\"postID\", JSON.stringify(post.id));\r\n  });\r\n\r\n  countDiv.append(reactionSection, editSection);\r\n  reactionSection.append(commentsDiv, reactionDiv);\r\n  container.append(title, text, imageDiv, seePost, countDiv);\r\n  outerContainer.append(container);\r\n  if (username === post.author.name) {\r\n    editSection.append(editButton, deleteButton);\r\n  }\r\n};\r\n"],"names":["deletePost","id","API_SOCIAL_POSTS","headers","onDeletePost","event","makeAPost","post","outerContainer","username","container","countDiv","title","text","imageDiv","image","editSection","editButton","deleteButton","reactionSection","commentsDiv","reactionDiv","seePost"],"mappings":"4CAYO,eAAeA,EAAWC,EAAI,CACnC,GAAI,EACe,MAAM,MAAMC,EAAmB,IAAMD,EAAI,CACxD,OAAQ,SACR,QAASE,EAAS,CACxB,CAAK,GACY,IACX,MAAM,cAAc,CAEvB,MAAe,CACd,MAAM,4CAA4C,CACnD,CACH,CCdO,eAAeC,EAAaC,EAAO,CACxC,MAAMJ,EAAKI,EAAM,OAAO,GACxB,QAAQ,IAAI,MAAOJ,CAAE,EAErB,MAAMD,EAAWC,CAAE,EAEnB,SAAS,OAAM,CACjB,CCXY,MAACK,EAAY,CAACC,EAAMN,IAAO,CACrC,MAAMO,EAAiB,SAAS,eAAeP,CAAE,EAEjDO,EAAe,UAAY,mCAG3B,MAAMC,EADW,KAAK,MAAM,aAAa,QAAQ,UAAU,CAAC,EAClC,KAEpBC,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UACR,oGACF,MAAMC,EAAW,SAAS,cAAc,KAAK,EAC7CA,EAAS,UAAY,2CAErB,MAAMC,EAAQ,SAAS,cAAc,IAAI,EACzCA,EAAM,UAAYL,EAAK,MACvBK,EAAM,UAAY,+CAElB,MAAMC,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,UAAYN,EAAK,KACtBM,EAAK,UAAY,0BACjB,MAAMC,EAAW,SAAS,cAAc,KAAK,EAG7C,GAFAA,EAAS,UACP,wEACEP,EAAK,MAAO,CACd,MAAMQ,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,IAAMR,EAAK,MAAM,IACvBQ,EAAM,IAAMR,EAAK,MAAM,IACvBQ,EAAM,UAAY,gBAElBD,EAAS,YAAYC,CAAK,CAC9B,KAAS,CACL,MAAMA,EAAQ,SAAS,cAAc,GAAG,EACxCA,EAAM,UAAY,oBAElBD,EAAS,YAAYC,CAAK,CAC3B,CAED,MAAMC,EAAc,SAAS,cAAc,KAAK,EAChDA,EAAY,UAAY,cAExB,MAAMC,EAAa,SAAS,cAAc,QAAQ,EAClDA,EAAW,UAAY,gEACvBA,EAAW,iBAAiB,QAAS,IAAM,CACzC,aAAa,QAAQ,SAAU,KAAK,UAAUV,EAAK,EAAE,CAAC,EACtD,aAAa,QAAQ,OAAQ,KAAK,UAAUA,CAAI,CAAC,EACjD,OAAO,SAAS,KAAO,aAC3B,CAAG,EAED,MAAMW,EAAe,SAAS,cAAc,QAAQ,EACpDA,EAAa,UAAY,UAAUX,EAAK,EAAE,iEAC1CW,EAAa,GAAKX,EAAK,GACvBW,EAAa,iBAAiB,QAASd,CAAY,EAEnD,MAAMe,EAAkB,SAAS,cAAc,KAAK,EACpDA,EAAgB,UAAY,cAE5B,MAAMC,EAAc,SAAS,cAAc,KAAK,EAChDA,EAAY,UAAY;AAAA,+EACqDb,EAAK,OAAO,QAAQ,OAEjG,MAAMc,EAAc,SAAS,cAAc,KAAK,EAChDA,EAAY,UAAY;AAAA,6EACmDd,EAAK,OAAO,SAAS,OAEhG,MAAMe,EAAU,SAAS,cAAc,QAAQ,EAC/CA,EAAQ,UACN,iEACFA,EAAQ,UAAY,WAEpBA,EAAQ,iBAAiB,QAAS,IAAM,CACtC,OAAO,SAAS,KAAO,SACvB,aAAa,QAAQ,SAAU,KAAK,UAAUf,EAAK,EAAE,CAAC,CAC1D,CAAG,EAEDI,EAAS,OAAOQ,EAAiBH,CAAW,EAC5CG,EAAgB,OAAOC,EAAaC,CAAW,EAC/CX,EAAU,OAAOE,EAAOC,EAAMC,EAAUQ,EAASX,CAAQ,EACzDH,EAAe,OAAOE,CAAS,EAC3BD,IAAaF,EAAK,OAAO,MAC3BS,EAAY,OAAOC,EAAYC,CAAY,CAE/C"}