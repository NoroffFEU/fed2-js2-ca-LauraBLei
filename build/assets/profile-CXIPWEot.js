import{b as p}from"./read-BFEmAszB.js";import{c as d,h as f}from"./headers-C9OjJDj3.js";import{m as g}from"./header-RH2cM1rY.js";import{m as b}from"./makePost-Dn_LDsC4.js";import{a as h}from"./authGuard-C2GFzsuy.js";async function y(t){try{const e=await fetch(d+"/"+t,{method:"GET",headers:f()});if(e.ok)return(await e.json()).data}catch{alert("something went wrong trying to get your profile information")}}async function I(t,{avatar:e,banner:o,bio:a}){try{const n={avatar:e,banner:o,bio:a},r=await fetch(d+"/"+t,{method:"PUT",headers:f(),body:JSON.stringify({avatar:e,banner:o,bio:a})});if(r.ok){alert("You updated your profile!");const s=await r.json();localStorage.setItem("userInfo",json.stringify(s))}}catch{alert("something went wrong trying to update your profile")}}async function w(t){t.preventDefault();const o=JSON.parse(localStorage.getItem("userInfo")).name,a=new FormData(t.target),n={url:a.get("avatarUrl"),alt:"Profile Image"},r={url:a.get("bannerUrl"),alt:a.get("bannerAlt")},s={avatar:n,banner:r,bio:a.get("bio")};I(o,s)}const P=document.forms.updateProfile;P.addEventListener("submit",w);h();const v=document.querySelector("header");g(v);const E=async()=>{const t=JSON.parse(localStorage.getItem("userInfo")),e=await y(t.name),o=await p(t.name),a=document.getElementById("profileBanner"),n=document.getElementById("profileImage"),r=document.getElementById("username"),s=document.getElementById("bio"),i=document.createElement("img");i.src=e.banner.url,i.alt=e.banner.alt,i.className="object-cover w-full h-full";const m=document.createElement("img");m.src=e.avatar.url,m.alt=e.avatar.alt,m.className="rounded-md border-white border-4";const c=document.createElement("h2");c.innerText=e.name,c.className="text-3xl text-white font-semibold";const l=document.createElement("p");l.innerText=e.bio,l.className="text-xl text-white font-semibold",a.appendChild(i),n.appendChild(m),r.appendChild(c),s.appendChild(l),o.forEach(u=>{b(u,"userPosts")})};E();
//# sourceMappingURL=profile-CXIPWEot.js.map
