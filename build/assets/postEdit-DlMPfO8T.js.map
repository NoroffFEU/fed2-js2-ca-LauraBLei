{"version":3,"file":"postEdit-DlMPfO8T.js","sources":["../../src/js/api/post/update.js","../../src/js/ui/post/update.js","../../src/js/router/views/postEdit.js"],"sourcesContent":["import { API_SOCIAL_POSTS } from \"../constants\";\r\nimport { headers } from \"../headers\";\r\n\r\n/**\r\n *\r\n * @param {string} id - id of the posts that will be updated\r\n * @param {object} postInfo - object, that contains the post info {title, body, tags, media}\r\n * @param {string} postInfo.title - title of the post\r\n * @param {string} postInfo.body - text of the post\r\n * @param {Array} postInfo.tags - array of strings with the tags of the posts - [\"tagOne\", \"tagTwo\"]\r\n * @param {object} postInfo.media  - object with image information in it - {url: \"string\", alt: \"string\"}\r\n * @example\r\n * ```js\r\n * updatePost(\"709\", {\"Title\", \"Text of post\", [\"tagOne\", \"TagTwo\"], {url: \"string\", alt: \"string\"}})\r\n * ```\r\n */\r\n\r\nexport async function updatePost(id, { title, body, tags, media }) {\r\n  const bodyElement = {\r\n    title: title,\r\n    body: body,\r\n    tags: tags,\r\n    media: media,\r\n  };\r\n\r\n  try {\r\n    const response = await fetch(API_SOCIAL_POSTS + \"/\" + id, {\r\n      method: \"PUT\",\r\n      headers: headers(),\r\n      body: JSON.stringify(bodyElement),\r\n    });\r\n\r\n    if (response.ok) {\r\n      alert(\"You updated the post!\");\r\n      window.location.href = \"/\";\r\n    }\r\n  } catch (error) {\r\n    alert(\"Something went wrong trying to update the post!\");\r\n  }\r\n}\r\n","import { updatePost } from \"../../api/post/update\";\r\n\r\n/**\r\n * Gets form data - then sends the information to the API function\r\n * @param {object} event\r\n * @example\r\n * ```js\r\n * form.addEventListener(\"submit\", onUpdatePost)\r\n * ```\r\n */\r\nexport async function onUpdatePost(event) {\r\n  event.preventDefault();\r\n  const id = JSON.parse(localStorage.getItem(\"postID\"));\r\n\r\n  const formData = new FormData(event.target);\r\n\r\n  const media = {\r\n    url: formData.get(\"url\"),\r\n    alt: formData.get(\"alt\"),\r\n  };\r\n\r\n  const EditPostData = {\r\n    title: formData.get(\"title\"),\r\n    body: formData.get(\"text\"),\r\n    tags: formData.get(\"tags\").split(\",\"),\r\n    media: media,\r\n  };\r\n\r\n  updatePost(id, EditPostData);\r\n}\r\n","import { makeHeader } from \"../../ui/global/header\";\r\nimport { onUpdatePost } from \"../../ui/post/update\";\r\nimport { authGuard } from \"../../utilities/authGuard\";\r\n\r\nauthGuard();\r\n\r\nconst form = document.forms.editPost;\r\n\r\nform.addEventListener(\"submit\", onUpdatePost);\r\nconst header = document.querySelector(\"header\");\r\nmakeHeader(header);\r\n\r\nexport const makeEditForm = () => {\r\n  const post = JSON.parse(localStorage.getItem(\"post\"));\r\n  const form = document.getElementById(\"editPost\");\r\n\r\n  form.innerHTML = `\r\n<input class=\"formInputOne\" type=\"text\" name=\"title\" placeholder=\"Title\" value=\"${post.title}\" maxlength=\"40\" />\r\n<textarea class=\"formInputTwo\" type=\"text\" name=\"text\" placeholder=\"Add text here..\"  maxlength=\"400\"> ${post.body}</textarea>\r\n<input class=\"formInputOne\" type=\"url\" name=\"url\" placeholder=\"Insert image url here..\" value=\"${post.media.url}\" maxlength=\"300\" />\r\n<input class=\"formInputOne\" type=\"text\" name=\"alt\" placeholder=\"insert an image description here...\" value=\"${post.media.alt}\" maxlength=\"100\"/>\r\n<input class=\"formInputOne\" type=\"text\" name=\"tags\" placeholder=\"Title\" value=\"${post.tags}\" />\r\n<button class=\"text-3xl text-blue buttonEffect font-bold\"> Save </button>\r\n`;\r\n};\r\n\r\nmakeEditForm();\r\n"],"names":["updatePost","id","title","body","tags","media","bodyElement","API_SOCIAL_POSTS","headers","onUpdatePost","event","formData","EditPostData","authGuard","form","header","makeHeader","makeEditForm","post"],"mappings":"sIAiBO,eAAeA,EAAWC,EAAI,CAAE,MAAAC,EAAO,KAAAC,EAAM,KAAAC,EAAM,MAAAC,GAAS,CACjE,MAAMC,EAAc,CAClB,MAAOJ,EACP,KAAMC,EACN,KAAMC,EACN,MAAOC,CACX,EAEE,GAAI,EACe,MAAM,MAAME,EAAmB,IAAMN,EAAI,CACxD,OAAQ,MACR,QAASO,EAAS,EAClB,KAAM,KAAK,UAAUF,CAAW,CACtC,CAAK,GAEY,KACX,MAAM,uBAAuB,EAC7B,OAAO,SAAS,KAAO,IAE1B,MAAe,CACd,MAAM,iDAAiD,CACxD,CACH,CC7BO,eAAeG,EAAaC,EAAO,CACxCA,EAAM,eAAc,EACpB,MAAMT,EAAK,KAAK,MAAM,aAAa,QAAQ,QAAQ,CAAC,EAE9CU,EAAW,IAAI,SAASD,EAAM,MAAM,EAEpCL,EAAQ,CACZ,IAAKM,EAAS,IAAI,KAAK,EACvB,IAAKA,EAAS,IAAI,KAAK,CAC3B,EAEQC,EAAe,CACnB,MAAOD,EAAS,IAAI,OAAO,EAC3B,KAAMA,EAAS,IAAI,MAAM,EACzB,KAAMA,EAAS,IAAI,MAAM,EAAE,MAAM,GAAG,EACpC,MAAON,CACX,EAEEL,EAAWC,EAAIW,CAAY,CAC7B,CCzBAC,IAEA,MAAMC,EAAO,SAAS,MAAM,SAE5BA,EAAK,iBAAiB,SAAUL,CAAY,EAC5C,MAAMM,EAAS,SAAS,cAAc,QAAQ,EAC9CC,EAAWD,CAAM,EAEL,MAACE,EAAe,IAAM,CAChC,MAAMC,EAAO,KAAK,MAAM,aAAa,QAAQ,MAAM,CAAC,EAC9CJ,EAAO,SAAS,eAAe,UAAU,EAE/CA,EAAK,UAAY;AAAA,kFAC+DI,EAAK,KAAK;AAAA,yGACaA,EAAK,IAAI;AAAA,iGACjBA,EAAK,MAAM,GAAG;AAAA,8GACDA,EAAK,MAAM,GAAG;AAAA,iFAC3CA,EAAK,IAAI;AAAA;AAAA,CAG1F,EAEAD,EAAc"}